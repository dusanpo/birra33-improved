const baseUrl="https://api.punkapi.com/v2/beers?page=",labelDiv=document.getElementById("label-cart"),shoppingCart=document.getElementById("shopping-cart"),totalAmountDiv=document.getElementById("total-amount");let page=1,perPage="&per_page=80";const fetchAPI=async()=>{const t=await fetch(baseUrl+page+perPage),e=await t.json();generateCartItems(e),totalAmount(e)};fetchAPI();let addToBasket=JSON.parse(localStorage.getItem("data"))||[];calculation();const generateCartItems=t=>{if(0!==addToBasket.length)return shoppingCart.innerHTML=addToBasket.map((e=>{const{id:a,item:n}=e;let i=t.find((t=>t.id===a))||[];const{image_url:s,name:d,abv:l}=i;return`\n        <div class="cart-item">\n        <div class="image-wrapper">\n        <img src=${s} class="image" alt=${s} />\n        </div>\n\n        <div class="details">\n\n        <div class="cart-title">\n          <h4 class="title-price">\n          <p>${d.substring(0,20)}</p>\n          <p class="cart-price">$${l}</p>\n          </h4>\n          <i onclick="removeItem(${a})" class="fa-sharp fa-solid fa-xmark"></i>\n        </div>\n\n        <div class="buttons">\n          <i onclick="decrement(${a})" class="bi bi-dash-lg"></i>\n          <div id=${a} class="quantity">${n}</div>\n          <i onclick="increment(${a})" class="bi bi-plus-lg"></i>\n        </div>\n\n        <p class="sum-price">$${(n*l).toFixed(1)}</p>\n        </div>\n        </div>\n        `})).join("");shoppingCart.innerHTML="",labelDiv.innerHTML='\n    <h2 class="empty-cart">Cart is empty</h2>\n    <a href="index.html">\n    <i class="fa-solid fa-circle-arrow-left"></i>\n    </a>\n    '},increment=t=>{let e=addToBasket.find((e=>e.id===t));void 0===e?addToBasket.push({id:t,item:1}):e.item+=1,fetchAPI(),update(t),localStorage.setItem("data",JSON.stringify(addToBasket))},decrement=t=>{let e=addToBasket.find((e=>e.id===t));void 0!==e&&0!==e.item&&(e.item-=1,update(t),addToBasket=addToBasket.filter((t=>0!==t.item)),fetchAPI(),localStorage.setItem("data",JSON.stringify(addToBasket)))},update=t=>{let e=addToBasket.find((e=>e.id===t));document.getElementById(t).innerHTML=e.item,calculation()},removeItem=t=>{addToBasket=addToBasket.filter((e=>e.id!==t)),fetchAPI(),calculation(),localStorage.setItem("data",JSON.stringify(addToBasket))},totalAmount=t=>{if(0!==addToBasket.length){let e=addToBasket.map((e=>{let a=t.find((t=>t.id===e.id))||[];return e.item*a.abv})).reduce(((t,e)=>t+e),0);totalAmountDiv.innerHTML=`\n   <div class="fixed-top amount">\n     <div class="container">\n      <div class="d-flex justify-content-center align-items-center amount-wrapper">\n       <h2 class="text-center total">Total Amount : $${e.toFixed(1)}</h2>\n      </div>\n    </div>\n  </div>\n <div class="buttons">\n   <button onclick="checkout()" class="checkout">Checkout</button>\n   <button onclick="clearCart()" class="clearCart">Clear Cart</button>\n </div>\n   `}else totalAmountDiv.innerHTML=""},clearCart=()=>{addToBasket=[],fetchAPI(),calculation(),localStorage.setItem("data",JSON.stringify(addToBasket))},checkout=()=>{alert("You have successfully placed your order."),addToBasket=[],fetchAPI(),calculation(),localStorage.setItem("data",JSON.stringify(addToBasket))};